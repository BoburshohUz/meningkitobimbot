{
  "groups": [
    {
      "name": "Kitob Bot Alerts",
      "rules": [
        {
          "title": "API Latency High",
          "condition": "C",
          "data": [
            {
              "refId": "A",
              "relativeTimeRange": {
                "from": 120,
                "to": 0
              },
              "datasourceUid": "prometheus",
              "model": {
                "expr": "histogram_quantile(0.95, sum by(le,endpoint) (http_request_latency_seconds_bucket{service=\"$service\"}[2m])) > 1",
                "instant": true
              }
            }
          ],
          "noDataState": "OK",
          "execErrState": "Error",
          "for": "1m",
          "labels": {
            "severity": "warning"
          },
          "annotations": {
            "summary": "95% latency > 1s"
          },
          "isPaused": false
        },
        {
          "title": "High Request Volume",
          "condition": "C",
          "data": [
            {
              "refId": "B",
              "relativeTimeRange": {
                "from": 60,
                "to": 0
              },
              "datasourceUid": "prometheus",
              "model": {
                "expr": "sum(rate(http_requests_total{service=\"$service\"}[1m])) * 60 > 300",
                "instant": true
              }
            }
          ],
          "for": "1m",
          "labels": {
            "severity": "info"
          },
          "annotations": {
            "summary": "req/min > 300"
          },
          "isPaused": false
        },
        {
          "title": "Chat Rate Limit Spike",
          "condition": "C",
          "data": [
            {
              "refId": "D",
              "relativeTimeRange": {
                "from": 120,
                "to": 0
              },
              "datasourceUid": "prometheus",
              "model": {
                "expr": "increase(chat_limit_exceeded_total{service=\"$service\"}[2m]) > 10",
                "instant": true
              }
            }
          ],
          "for": "1m",
          "labels": {
            "severity": "critical"
          },
          "annotations": {
            "summary": "rate-limit >10 /2m"
          },
          "isPaused": false
        }
      ]
    }
  ]
}